{
  "consumer": "alerts",
  "tags": [
    "apm",
    "errors",
    "custom",
    "app_team"
  ],
  "name": "APM High Error rate : <project-name>",
  "enabled": true,
  "throttle": null,
  "schedule": {
    "interval": "1m"
  },
  "params": {
    "threshold": 25,
    "windowSize": 1,
    "windowUnit": "m",
    "environment": "<environment>"
  },
  "rule_type_id": "apm.error_rate",
  "notify_when": "onActionGroupChange",
  "actions": [
    {
      "group": "threshold_met",
      "id": "elastic-cloud-email",
      "params": {
        "message": "{{alertName}} alert is firing because of the following conditions:\n - Service name: {{context.serviceName}}\n - Environment: {{context.environment}}\n - Threshold: {{context.threshold}} errors\n - Triggered value: {{context.triggerValue}} errors over the last {{context.interval}}\nCheck service status in the APM dashboard: https://5cde49de6d934a2680f1997dd58236ce.privatelink.westeurope.azure.elastic-cloud.com/app/apm/services?comparisonEnabled=true&environment=ENVIRONMENT_ALL&rangeFrom=now-1h&rangeTo=now&offset=1d",
    "to": [
      "<support-email-address>"
    ],
    "subject": "{{alertName}} triggered"
    }
  },
    {
      "group": "recovered",
      "id": "elastic-cloud-email",
      "params": {
        "message": "Recovered\nCheck service status in the APM dashboard: https://5cde49de6d934a2680f1997dd58236ce.privatelink.westeurope.azure.elastic-cloud.com/app/apm/services?comparisonEnabled=true&environment=ENVIRONMENT_ALL&rangeFrom=now-1h&rangeTo=now&offset=1d",
        "to": [
          "<support-email-address>"
        ],
        "subject": "{{alertName}} recovered"
      }
    }
  ]
}