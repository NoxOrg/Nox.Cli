# NOX Test Get AAD user Object Id

name: Test Get AAD user Object Id
cli:
  branch: test
  command: get-user-object-id
  command-alias: guoid
  description: Test add team members
  examples:
    - ["sync get-user-object-id", "--path <designFolder>"]
    - ["sync guoid", "--path <designFolder>"]

jobs:
  sync-test:  
    steps:
      - name: Connect to AAD
        id: connect
        uses: azuread/connect_v1
        with:
          tenant-id: ${{ server.secrets.AZURE_TENANT_ID }}
          client-id: ${{ server.secrets.AZURE_CLIENT_ID }}
          client-secret: ${{ server.secrets.AZURE_CLIENT_SECRET }}
        display:
          success: Connected to Azure AD
          error: Failed to connect to Azure AD ${{ steps.connect.error-message }}
        run-at-server: true

      - name: Get User Object Id
        id: get-id
        uses: azuread/get-user-object-id@v1
        with:
          aad-client: ${{ steps.connect.outputs.aad-client }}
          user-name: Jan.Schutte@iwgplc.com
        display:
          success: Get Object Id success
          error: Get Object Id failed. (${{ steps.get-id.error-message }})
        run-at-server: true